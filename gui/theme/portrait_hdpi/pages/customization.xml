<?xml version="1.0"?>
<recovery>
	<pages>
		<!-- Customization -->
		<page name="ext_custom_reset">
			<action>
				<action function="set">needs_repack=0</action>
				<action function="set">update_fonts=0</action>
				<action function="set">remove_theme=0</action>
				<action function="set">update_navbar=0</action>
				<action function="set">update_accent=0</action>
				<action function="set">update_style=0</action>
				<action function="set">update_action=0</action>
				
				<action function="set">navbar_disable_tmp=%navbar_disable%</action>
				<action function="set">navbar_disable_add_tmp=%navbar_disable_add%</action>
				<action function="set">real_gestures_enable_tmp=%real_gestures_enable%</action>
				
				<action function="set">theme_font_tmp=%theme_font%</action>
				<action function="set">theme_sec_font_tmp=%theme_sec_font%</action>
				<action function="set">theme_font_size_tmp=%theme_font_size%</action>
				<action function="set">theme_font_weight_tmp=%theme_font_weight%</action>
				
				<action function="set">theme_accent_tmp=%theme_accent%</action>
				<action function="set">theme_accent_light_tmp=%theme_accent_light%</action>
				<action function="set">theme_accent_dark_tmp=%theme_accent_dark%</action>
				<action function="set">theme_style_tmp=%theme_style%</action>
				<action function="set">theme_style_act_tmp=%theme_style_act%</action>
				<action function="set">theme_pie_tmp=%theme_pie%</action>
				
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_gest">
			<action>
				<action function="set">of_reload_back=ext_custom_gest</action>
			</action>

			<!-- Switch -->
			<fill color="%accent%">
				<condition var1="real_gestures_enable_tmp" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>

			<fill color="%unactive_title%">
				<condition var1="real_gestures_enable_tmp" op="!=" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>

			<image style="switch_on">
				<condition var1="real_gestures_enable_tmp" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>
			
			<image style="switch_off">
				<condition var1="real_gestures_enable_tmp" op="!=" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>

			<text style="text_ab_switch">
				<placement x="%col1_x_indent%" y="%ab_bc2_y%"/>
				<text>{@gst_enable_all}</text>
			</text>

			<button style="bs_btn">
				<condition var1="real_gestures_enable_tmp" op="!=" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">real_gestures_enable_tmp=1</action>
				<action function="set">needs_repack=1</action>
				<action function="set">update_navbar=1</action>
				<action function="set">gst_back_left=1</action>
				<action function="set">gst_back_right=1</action>
				<action function="set">gst_console=1</action>
				<action function="set">navbar_disable_tmp=1</action>
				<action function="set">navbar_disable_add_tmp=96</action>
			</button>

			<button style="bs_btn">
				<condition var1="real_gestures_enable_tmp" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">real_gestures_enable_tmp=0</action>
				<action function="set">needs_repack=1</action>
				<action function="set">update_navbar=1</action>
				<action function="set">gst_back_left=0</action>
				<action function="set">gst_back_right=0</action>
				<action function="set">gst_console=0</action>
				<action function="set">navbar_disable_tmp=0</action>
				<action function="set">navbar_disable_add_tmp=0</action>
			</button>

			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@gst_title}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_3a_y%"/>
				<text>{@gst_back}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row2_1a_y%" w="%screen_w%" h="%lb_l2%"/>
				<listitem name="{@gst_back_left}">
					<data variable="gst_back_left"/>
				</listitem>
				<listitem name="{@gst_back_right}">
					<data variable="gst_back_right"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row3_2a_y%"/>
				<text>{@cust_oth}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row3_3a_y%" w="%screen_w%" h="%lb_l2%"/>
				<listitem name="{@gst_console_enable}">
					<data variable="gst_console"/>
				</listitem>
			</listbox>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom">
			<action>
				<action function="set">of_reload_back=ext_custom</action>
			</action>

			<listbox style="btn_list">
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%bl_fullscreen_h%"/>
				<listitem name="{@theme_hdr}">
					<icon res="invert"/>
					<action function="page">ext_custom_theme</action>
				</listitem>
				<listitem name="{@gst_title}">
					<icon res="gestures"/>
					<action function="page">ext_custom_gest</action>
				</listitem>
				<listitem name="{@navbar_title}">
					<condition var1="allow_disable_nav" var2="1"/>
					<condition var1="real_gestures_enable" op="!=" var2="1"/>
					<icon res="nav"/>
					<action function="page">ext_custom_nav</action>
				</listitem>
				<listitem name="{@navbar_title}">
					<condition var1="real_gestures_enable" op="!=" var2="1"/>
					<condition var1="allow_disable_nav" op="!=" var2="1"/>
					<icon res="nav"/>
					<action function="page">ext_custom_nav_no_switch</action>
				</listitem>
				<listitem name="{@navbar_title}">
					<condition var1="real_gestures_enable" var2="1"/>
					<icon res="nav"/>
					<action function="page">ext_custom_nav_error</action>
				</listitem>
				<listitem name="{@settings_ui_status}">
					<icon res="statusbar"/>
					<action function="page">ext_custom_status</action>
				</listitem>
				<listitem name="{@lockscreen_title}">
					<icon res="lockscreen"/>
					<action function="page">ext_custom_lock</action>
				</listitem>
				<listitem name="{@sph_sph}">
					<icon res="boot_splash"/>
					<action function="set">spl_logo_type=w</action>
					<action function="set">spl_bg_color=#ED6F02</action>
					<action function="set">spl_bg_user=0</action>
					<action function="set">spl_bg_on=0</action>
					<action function="set">spl_ofr=1</action>
					<action function="page">ext_custom_splash</action>
				</listitem>
				<listitem name="{@keyboard_title}">
					<icon res="keyboard"/>
					<action function="page">ext_custom_key</action>
				</listitem>
				<listitem name="{@theme_fonts}">
					<icon res="ws_font"/>
					<action function="set">font_block=0</action>
					<action function="page">ext_custom_fonts_check</action>
				</listitem>
				<listitem name="{@cust_oth}">
					<icon res="plus"/>
					<action function="page">ext_custom_other</action>
				</listitem>
			</listbox>
			
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_ui}</text>
			</text>
			
			<button style="actionbar">
				<condition var1="needs_repack" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<action function="page">ext_custom_reset</action>
			</button>

			<image>
				<condition var1="needs_repack" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<image resource="actionbar_reset"/>
			</image>
			
			<button style="actionbar">
				<condition var1="fileexists" var2="/sdcard/Fox/.theme"/>
				<condition var1="needs_repack" var2="1"/>
				<placement x="%ab_btn2_x%" y="%ab_y%" placement="4"/>
				<action function="set">remove_theme=1</action>
				<action function="set">needs_repack=1</action>
			</button>

			<image>
				<condition var1="fileexists" var2="/sdcard/Fox/.theme"/>
				<condition var1="needs_repack" var2="1"/>
				<placement x="%ab_btn2_x%" y="%ab_y%" placement="4"/>
				<image resource="actionbar_delete"/>
			</image>
			
			<button style="actionbar">
				<condition var1="fileexists" var2="/sdcard/Fox/.theme"/>
				<condition var1="needs_repack" op="!=" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<action function="set">remove_theme=1</action>
				<action function="set">needs_repack=1</action>
			</button>

			<image>
				<condition var1="fileexists" var2="/sdcard/Fox/.theme"/>
				<condition var1="needs_repack" op="!=" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<image resource="actionbar_delete"/>
			</image>
			
			<template name="snackbar_update"/>

			<template name="gestures"/>
			
			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">settings</action>
			</action>
		</page>

		<!-- Statusbar -->
		<page name="ext_custom_status">
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@settings_ui_status}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_1_y%"/>
				<text>{@status_clock_pos}</text>
			</text>

			<listbox>
				<placement x="0" y="%row1_2_y%" w="%screen_w%" h="%lb_l3%"/>
				<data name="center_clock"/>
				<listitem name="{@status_clock_left}">2</listitem>
				<listitem name="{@status_clock_center}">1<condition var1="cutout_clock" var2="0"/></listitem>
				<listitem name="{@status_clock_right}">0<condition var1="cutout_clock" op="&lt;=" var2="1"/></listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row4_3a_y%"/>
				<text>{@settings_ui_status}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row5_1a_y%" w="%screen_w%" h="%lb_l6%"/>
				<listitem name="{@hide_notch}">
					<data variable="hide_notch"/>
					<condition var1="allow_hide_notch" var2="1"/>
				</listitem>
				<listitem name="{@separate_status}">
					<data variable="separate_status"/>
				</listitem>
				<listitem name="{@dark_title}">
					<data variable="darker_ui"/>
				</listitem>
				<listitem name="{@noshadow_title}">
					<data variable="show_shadow"/>
				</listitem>
				<listitem name="{@show_cpu_temp_bar}">
					<data variable="show_cpu_temp"/>
					<condition var1="center_clock" op="!=" var2="2"/>
				</listitem>
				<listitem name="{@settings_ui_battery}">
					<data variable="enable_battery"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row3_1a_y%"/>
				<text>{@status_battery_style}</text>
			</text>

			<listbox>
				<placement x="0" y="%row3_2a_y%" w="%screen_w%" h="%lb_l2%"/>
				<data name="style_battery"/>
				<listitem name="Pie">0</listitem>
				<listitem name="{@status_battery_circle}">1</listitem>
			</listbox>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<!-- Keyboard -->
		<page name="ext_custom_key">
			<fill color="%accent%">
				<condition var1="key_buttons" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>
			
			<fill color="%unactive_title%">
				<condition var1="key_buttons" op="!=" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>

			<image style="switch_on">
				<condition var1="key_buttons" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>

			<image style="switch_off">
				<condition var1="key_buttons" op="!=" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>

			<text style="text_ab_switch">
				<placement x="%col1_x_indent%" y="%ab_bc2_y%"/>
				<text>{@keyboard_newstyle}</text>
			</text>

			<button style="bs_btn">
				<condition var1="key_buttons" op="!=" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">key_buttons=1</action>
			</button>
			
			<button style="bs_btn">
				<condition var1="key_buttons" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">key_buttons=0</action>
			</button>

			<template name="base_key"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@keyboard_title}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row1_3a_y%" w="%screen_w%" h="%lb_l2%"/>
				<listitem name="{@keyboard_nums}">
					<data variable="key_numbar"/>
				</listitem>
				<listitem name="{@key_swipe}">
					<data variable="key_allow_swipe"/>
				</listitem>
			</listbox>

			<template name="gestures_key"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<!-- Lockscreen -->
		<page name="ext_custom_lock">
			<template name="body"/>
			
			<fill color="%title_solid_bg%">
				<condition var1="darker_ui" var2="1"/>
				<placement x="0" y="0" w="%screen_w%" h="%row4_1_y%"/>
			</fill>

			<template name="status_bg"/>
			
			<template name="actionbar_back"/>

			<template name="statusbarinfo"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@lockscreen_title}</text>
			</text>

			<!-- Lockscreen preview -->
			<image>
				<condition var1="clock_style" var2="0"/>
				<image resource="unlock_icon"/>
				<placement x="%center_x%" y="%row2_2_y%" placement="4"/>
			</image>

			<text color="%text%">
				<condition var1="clock_style" var2="1"/>
				<font resource="clock"/>
				<placement x="%center_x%" y="%row1_3a_y%" placement="4"/>
				<text>%tw_time%</text>
			</text>

			<text color="%text%">
				<condition var1="clock_style" var2="1"/>
				<condition var1="lock_info" var2="1"/>
				<font resource="info"/>
				<placement x="%center_x%" y="%row2_3a_y%" placement="4"/>
				<text>{@cpu_temp} | %tw_battery_charge%</text>
			</text>
			<!-- -->

			<image>
				<image resource="actionbar_shadow"/>
				<condition var1="show_shadow" var2="1"/>
				<placement x="0" y="%row4_1_y%"/>
			</image>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row4_2_y%"/>
				<text>{@lockscreen_style}</text>
			</text>

			<listbox>
				<placement x="0" y="%row4_3_y%" w="%screen_w%" h="%lb_l2%"/>
				<data name="clock_style"/>
				<listitem name="{@lockscreen_icon}">0</listitem>
				<listitem name="{@lockscreen_clock}">1</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row6_1_y%"/>
				<text>{@cust_oth}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row6_2_y%" w="%screen_w%" h="%lb_l3%"/>
				<listitem name="{@lockscreen_info}">
					<condition var1="clock_style" var2="1"/>
					<data variable="lock_info"/>
				</listitem>
				<listitem name="{@lockscreen_quicklock}">
					<condition var1="clock_style" var2="0"/>
					<data variable="lock_action"/>
				</listitem>
				<listitem name="{@lockscreen_btn}">
					<data variable="lock_btn"/>
				</listitem>
			</listbox>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_nav">
			<action>
				<action function="set">of_reload_back=ext_custom_nav</action>
			</action>

			<fill color="%accent%">
				<condition var1="navbar_disable_tmp" var2="0"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>

			<fill color="%unactive_title%">
				<condition var1="navbar_disable_tmp" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
			</fill>

			<image style="switch_off">
				<condition var1="navbar_disable_tmp" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>
			
			<image style="switch_on">
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab2_y%" placement="4"/>
			</image>

			<text style="text_ab_switch">
				<placement x="%col1_x_indent%" y="%ab_bc2_y%"/>
				<text>{@navbar_onscreen}</text>
			</text>

			<button style="bs_btn">
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">navbar_disable_tmp=1</action>
				<action function="set">navbar_disable_add_tmp=144</action>
				<action function="set">needs_repack=1</action>
				<action function="set">update_navbar=1</action>
			</button>

			<button style="bs_btn">
				<condition var1="navbar_disable_tmp" var2="1"/>
				<placement x="0" y="%ab_h%" w="%screen_w%" h="%ab_btn_h%"/>
				<action function="set">navbar_disable_tmp=0</action>
				<action function="set">navbar_disable_add_tmp=0</action>
				<action function="set">needs_repack=1</action>
				<action function="set">update_navbar=1</action>
			</button>

			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@navbar_title}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_3a_y%"/>
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<text>{@settings_ui_style}</text>
			</text>

			<listbox>
				<placement x="0" y="%row2_1a_y%" w="%screen_w%" h="%lb_l3%"/>
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<data name="nougat"/>
				<listitem name="{@cust_navbar_cls}">0</listitem>
				<listitem name="{@cust_navbar_noug}">1</listitem>
				<listitem name="Pie">3</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row4_1_y%"/>
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<text>{@settings_ui_color}</text>
			</text>

			<listbox>
				<placement x="0" y="%row4_2_y%" w="%screen_w%" h="%lb_l5%"/>
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<data name="navbar_bkg"/>
				<listitem name="{@fm_none}">0</listitem>
				<listitem name="{@dark_nav}">1</listitem>
				<listitem name="{@navbar_style_line}">2</listitem>
				<listitem name="{@cust_navbar_accent}">3</listitem>
				<listitem name="{@cust_navbar_black}">4<condition var1="theme_style_tmp" op="!=" var2="Black"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row7_1a_y%"/>
				<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				<text>{@cust_oth}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row7_2a_y%" w="%screen_w%" h="%lb_l3%"/>
				<listitem name="{@cust_navbar_white}">
					<condition var1="navbar_bkg" op="!=" var2="3"/>
					<condition var1="theme_style" op="!=" var2="Light"/>
					<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
					<data variable="navbar_accent"/>
				</listitem>
				<listitem name="{@cust_navbar_gray}">
					<condition var1="navbar_bkg" op="!=" var2="3"/>
					<condition var1="theme_style" var2="Light"/>
					<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
					<data variable="navbar_accent"/>
				</listitem>
				<listitem name="{@rev_navbar_chk}">
					<data variable="navbar_sams"/>
					<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
				</listitem>
				<listitem name="{@show_slideout}">
					<condition var1="nougat" var2="3"/>
					<condition var1="navbar_disable_tmp" op="!=" var2="1"/>
					<data variable="show_slideout"/>
				</listitem>
			</listbox>

			<action>
				<condition var1="navbar_bkg" var2="3"/>
				<condition var1="navbar_accent" var2="0"/>
				<action function="set">navbar_accent=1</action>
			</action>
			<action>
				<condition var1="nougat" op="!=" var2="3"/>
				<condition var1="show_slideout" var2="0"/>
				<action function="set">show_slideout=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_other">
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@cust_oth}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_1_y%"/>
				<text>{@options_hdr}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row1_2_y%" w="%screen_w%" h="%lb_l6%"/>
				<listitem name="{@use_fixed_font}">
					<data variable="use_fixed_font"/>
				</listitem>
				<listitem name="{@fm_icons_simple}">
					<data variable="list_font"/>
				</listitem>
				<listitem name="{@cust_expand_list}">
					<data variable="auto_show_btns"/>
				</listitem>
				<listitem name="{@cust_autoapply}">
					<data variable="instant_apply"/>
				</listitem>
				<listitem name="{@cust_new_ota_screen}">
					<data variable="ota_new_screen"/>
				</listitem>
				<listitem name="{@navpan_new_design}">
					<data variable="new_nav_panel_des"/>
				</listitem>
			</listbox>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_nav_error">
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@navbar_title}</text>
			</text>

			<image>
				<placement x="%col1_x%" y="%row1_1_y%"/>
				<image resource="icon_info"/>
			</image>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row1_1_y%"/>
				<text>{@gst_navbar_error}</text>
			</text>

			<text style="text_body2_hl">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>{@gst_navbar_error_2}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row2_1_y%"/>
				<text>{@settings_ui_color}</text>
			</text>

			<listbox>
				<placement x="0" y="%row2_2_y%" w="%screen_w%" h="%lb_l5%"/>
				<data name="navbar_bkg"/>
				<listitem name="{@fm_none}">0</listitem>
				<listitem name="{@dark_nav}">1</listitem>
				<listitem name="{@navbar_style_line}">2</listitem>
				<listitem name="{@cust_navbar_accent}">3</listitem>
				<listitem name="{@cust_navbar_black}">4<condition var1="theme_style_tmp" op="!=" var2="Black"/>
				</listitem>
			</listbox>

			<text style="caption">
				<condition var1="navbar_bkg" op="!=" var2="3"/>
				<placement x="%col1_x_caption%" y="%row5_1a_y%"/>
				<text>{@cust_oth}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row5_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<listitem name="{@cust_line_white}">
					<condition var1="theme_style" op="!=" var2="Light"/>
					<data variable="navbar_accent"/>
					<condition var1="navbar_bkg" op="!=" var2="3"/>
				</listitem>
				<listitem name="{@cust_line_gray}">
					<condition var1="theme_style" var2="Light"/>
					<data variable="navbar_accent"/>
					<condition var1="navbar_bkg" op="!=" var2="3"/>
				</listitem>
			</listbox>

			<action>
				<condition var1="navbar_bkg" var2="3"/>
				<condition var1="navbar_accent" var2="0"/>
				<action function="set">navbar_accent=1</action>
			</action>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_nav_no_switch">
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@navbar_title}</text>
			</text>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_1_y%"/>
				<text>{@settings_ui_style}</text>
			</text>

			<listbox>
				<placement x="0" y="%row1_2_y%" w="%screen_w%" h="%lb_l3%"/>
				<data name="nougat"/>
				<listitem name="{@cust_navbar_cls}">0</listitem>
				<listitem name="{@cust_navbar_noug}">1</listitem>
				<listitem name="Pie">3</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row3_1a_y%"/>
				<text>{@settings_ui_color}</text>
			</text>

			<listbox>
				<placement x="0" y="%row3_2a_y%" w="%screen_w%" h="%lb_l5%"/>
				<data name="navbar_bkg"/>
				<listitem name="{@fm_none}">0</listitem>
				<listitem name="{@dark_nav}">1</listitem>
				<listitem name="{@navbar_style_line}">2</listitem>
				<listitem name="{@cust_navbar_accent}">3</listitem>
				<listitem name="{@cust_navbar_black}">4<condition var1="theme_style_tmp" op="!=" var2="Black"/>
				</listitem>
			</listbox>

			<text style="caption">
				<placement x="%col1_x_caption%" y="%row6_2_y%"/>
				<text>{@cust_oth}</text>
			</text>

			<listbox style="settingslist">
				<placement x="0" y="%row6_3_y%" w="%screen_w%" h="%lb_l3%"/>
				<listitem name="{@cust_navbar_white}">
					<condition var1="navbar_bkg" op="!=" var2="3"/>
					<condition var1="theme_style" op="!=" var2="Light"/>
					<data variable="navbar_accent"/>
				</listitem>
				<listitem name="{@cust_navbar_gray}">
					<condition var1="navbar_bkg" op="!=" var2="3"/>
					<condition var1="theme_style" var2="Light"/>
					<data variable="navbar_accent"/>
				</listitem>
				<listitem name="{@rev_navbar_chk}">
					<data variable="navbar_sams"/>
				</listitem>
				<listitem name="{@show_slideout}">
					<condition var1="nougat" var2="3"/>
					<data variable="show_slideout"/>
				</listitem>
			</listbox>

			<action>
				<condition var1="navbar_bkg" var2="3"/>
				<condition var1="navbar_accent" var2="0"/>
				<action function="set">navbar_accent=1</action>
			</action>

			<action>
				<condition var1="nougat" op="!=" var2="3"/>
				<condition var1="show_slideout" var2="0"/>
				<action function="set">show_slideout=1</action>
			</action>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

		<page name="ext_custom_fonts_check">
			<action>
				<condition var1="tw_language" op="!=" var2="ar"/>
				<condition var1="tw_language" op="!=" var2="es-ES"/>
				<condition var1="tw_language" op="!=" var2="hu"/>
				<condition var1="tw_language" op="!=" var2="zh_CH"/>
				<condition var1="tw_language" op="!=" var2="zh_TW"/>
				<condition var1="tw_language" op="!=" var2="vn"/>
				<action function="set">font_block=1</action>
				<action function="page">ext_custom_fonts</action>
			</action>

			<action>
				<condition var1="font_block" op="!=" var2="1"/>
				<action function="page">ext_custom_fonts_cn</action>
			</action>
		</page>

        <page name="ext_custom_fonts">
			<action>
				<action function="set">of_reload_back=ext_custom_fonts</action>
			</action>
			
			<template name="base"/>
			<template name="tabs"/>
			<template name="actionbar_back"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_fonts}</text>
			</text>
			
			<button style="tab_btn_hl">
				<placement x="0" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_primary_tab}</text>
			</button>

			<button style="tab_btn">
				<placement x="360" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_secondary_tab}</text>
				<action function="page">ext_custom_fonts_sec</action>
			</button>

			<button style="tab_btn">
				<placement x="720" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_size_tab}</text>
				<action function="page">ext_custom_fonts_size</action>
			</button>
			
			<image style="tab">
				<placement x="24" y="%tab_title_h%" placement="2"/>
			</image>
			
			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_3_y%" />
				<text>{@theme_font_select}</text>
			</text>
			
			<listbox>
				<placement x="0" y="%row2_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font1" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Roboto">Roboto</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row2_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font2" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Roboto Slab">RobotoSlab</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row3_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font3" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Google Sans">GoogleSans</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row3_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font4" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Euclid Flex">EuclidFlex</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row4_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font5" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Choco Cooky">Chococooky</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row4_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font6" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Fira Code">FiraCode</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row5_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font7" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Exo 2">Exo2</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row5_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font8" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="MiLan Pro">MILanPro</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row6_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font9" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_font_tmp"/>
				<listitem name="Amatic">Amatic</listitem>
			</listbox>
			
			<action>
				<condition var1="theme_font_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_fonts=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>

        <page name="ext_custom_fonts_sec">
			<action>
				<action function="set">of_reload_back=ext_custom_fonts_sec</action>
			</action>
			
			<template name="base"/>
			<template name="tabs"/>
			<template name="actionbar_back"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_fonts}</text>
			</text>
			
			<button style="tab_btn">
				<placement x="0" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_primary_tab}</text>
				<action function="page">ext_custom_fonts</action>
			</button>

			<button style="tab_btn_hl">
				<placement x="360" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_secondary_tab}</text>
			</button>

			<button style="tab_btn">
				<placement x="720" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_size_tab}</text>
				<action function="page">ext_custom_fonts_size</action>
			</button>

			<image style="tab">
				<placement x="384" y="%tab_title_h%" placement="2"/>
			</image>
			
			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_3_y%" />
				<text>{@theme_font_select}</text>
			</text>
			
			<listbox>
				<placement x="0" y="%row2_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font1" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Roboto">Roboto</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row2_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font2" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Roboto Slab">RobotoSlab</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row3_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font3" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Google Sans">GoogleSans</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row3_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font4" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Euclid Flex">EuclidFlex</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row4_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font5" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Choco Cooky">Chococooky</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row4_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font6" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Fira Code">FiraCode</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row5_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font7" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Exo 2">Exo2</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row5_2a_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font8" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="MiLan Pro">MILanPro</listitem>
			</listbox>
			
			<listbox>
				<placement x="0" y="%row6_1_y%" w="%screen_w%" h="%lb_l1%"/>
				<font resource="font9" spacing="%fileselector_spacing%" color="%text%" />
				<data name="theme_sec_font_tmp"/>
				<listitem name="Amatic">Amatic</listitem>
			</listbox>
			
			<action>
				<condition var1="theme_sec_font_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_fonts=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>
        
        <page name="ext_custom_fonts_size">
			<action>
				<action function="set">of_reload_back=ext_custom_fonts_size</action>
			</action>
			
			<template name="base"/>
			<template name="tabs"/>
			<template name="actionbar_back"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_fonts}</text>
			</text>
			
			<button style="tab_btn">
				<placement x="0" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_primary_tab}</text>
				<action function="page">ext_custom_fonts</action>
			</button>

			<button style="tab_btn">
				<placement x="360" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_secondary_tab}</text>
				<action function="page">ext_custom_fonts_sec</action>
			</button>

			<button style="tab_btn_hl">
				<placement x="720" y="%tab_btn_y%" w="360" h="84"/>
				<text>{@theme_font_size_tab}</text>
			</button>

			<image style="tab">
				<placement x="744" y="%tab_title_h%" placement="2"/>
			</image>
			
            <text style="caption">
				<placement x="%col1_x_caption%" y="%row1_3_y%" />
				<text>{@font_size}</text>
			</text>

			<listbox>
				<placement x="0" y="%row2_1_y%" w="%screen_w%" h="%lb_l3%"/>
				<data name="theme_font_size_tmp"/>
				<listitem name="{@font_small}">s</listitem>
				<listitem name="{@font_norm}">n</listitem>
				<listitem name="{@font_big}">b</listitem>
			</listbox>

			<action>
				<condition var1="theme_font_size_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_fonts=1</action>
			</action>

            <text style="caption">
				<placement x="%col1_x_caption%" y="%row3_3a_y%" />
				<text>{@theme_fweight}</text>
			</text>

			<listbox>
				<placement x="0" y="%row4_1a_y%" w="%screen_w%" h="%lb_l3%"/>
				<data name="theme_font_weight_tmp"/>
				<listitem name="{@theme_fweight_norm}">0</listitem>
				<listitem name="{@theme_fweight_reg}">1</listitem>
				<listitem name="{@theme_fweight_med}">2</listitem>
			</listbox>

			<action>
				<condition var1="theme_font_weight_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_fonts=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>
		
		<page name="ext_custom_fonts_cn">
			<template name="base"/>

			<action>
				<action function="set">of_reload_back=ext_custom_fonts_cn</action>
			</action>
			
			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_fonts}</text>
			</text>

			<!-- Font Size -->
			<text style="caption">
				<placement x="%col1_x_caption%" y="%row1_1_y%" />
				<text>{@font_size}</text>
			</text>

			<listbox>
				<placement x="0" y="%row1_2_y%" w="%screen_w%" h="%lb_l3%"/>
				<data name="theme_font_size_tmp"/>
				<listitem name="{@font_small}">s</listitem>
				<listitem name="{@font_norm}">n</listitem>
				<listitem name="{@font_big}">b</listitem>
			</listbox>

			<action>
				<condition var1="theme_font_size_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_fonts=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>
		</page>
		
		<page name="ext_custom_theme">
			<template name="base"/>

			<action>
				<action function="set">of_reload_back=ext_custom_theme</action>
			</action>
			
			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@theme_hdr}</text>
			</text>
			
			<text style="caption">
				<placement x="%col1_x%" y="%row1_1_y%" />
				<text>{@theme_style}</text>
			</text>

			<!-- Themes -->
			<!-- Night -->
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_shadow"/>
			</image>
			
			<button>
				<placement x="%ws_cards_x1%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_night"/>
				<action function="set">theme_style_tmp=Night</action>
				<action function="set">theme_style_act_tmp=Default</action>
			</button>

			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y1%" placement="4"/>
				<condition var1="theme_style_tmp" var2="Night"/>
				<image resource="style_apply"/>
			</image>
			<!-- -->

			<!-- Gray -->
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_shadow"/>
			</image>
			
			<button>
				<placement x="%ws_cards_x2%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_black"/>
				<action function="set">theme_style_tmp=Black</action>
				<action function="set">theme_style_act_tmp=Default</action>
			</button>

			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y1%" placement="4"/>
				<condition var1="theme_style_tmp" var2="Black"/>
				<image resource="style_apply"/>
			</image>
			<!-- -->
			
			<!-- Black -->
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x3%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_gray"/>
				<action function="set">theme_style_tmp=Gray</action>
				<action function="set">theme_style_act_tmp=Default</action>
			</button>

			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y1%" placement="4"/>
				<condition var1="theme_style_tmp" var2="Gray"/>
				<image resource="style_apply"/>
			</image>
			<!-- -->

			<!-- Light -->
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x4%" y="%ws_cards_y1%" placement="4"/>
				<image resource="style_light"/>
				<action function="set">theme_style_tmp=Light</action>
				<action function="set">theme_style_act_tmp=Black</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y1%" placement="4"/>
				<condition var1="theme_style_tmp" var2="Light"/>
				<image resource="style_apply_black"/>
			</image>
			<!-- -->

			<!-- Accent colors -->
			<text style="caption">
				<placement x="%col1_x%" y="%row3_1_y%" />
				<text>{@theme_accent}</text>
			</text>

			<!-- Fox -->
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y2%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x1%" y="%ws_cards_y2%" placement="4"/>
				<image resource="accent_fox"/>
				<action function="set">theme_accent_tmp=Fox</action>
				<action function="set">theme_accent_light_tmp=#D86100</action>
				<action function="set">theme_accent_dark_tmp=#ED6F02</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y2%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Fox"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Google -->
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y2%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x2%" y="%ws_cards_y2%" placement="4"/>
				<image resource="accent_google"/>
				<action function="set">theme_accent_tmp=Google</action>
				<action function="set">theme_accent_light_tmp=#1A73E8</action>
				<action function="set">theme_accent_dark_tmp=#8AB4F8</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y2%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Google"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Lollipop -->
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y2%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x3%" y="%ws_cards_y2%" placement="4"/>
				<image resource="accent_lollipop"/>
				<action function="set">theme_accent_tmp=Lollipop</action>
				<action function="set">theme_accent_light_tmp=#009788</action>
				<action function="set">theme_accent_dark_tmp=#93BBBA</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y2%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Lollipop"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Black -->
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y2%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x4%" y="%ws_cards_y2%" placement="4"/>
				<image resource="accent_black"/>
				<action function="set">theme_accent_tmp=Black</action>
				<action function="set">theme_accent_light_tmp=#202124</action>
				<action function="set">theme_accent_dark_tmp=#D7DEE6</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y2%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Black"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Red -->
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y3%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x1%" y="%ws_cards_y3%" placement="4"/>
				<image resource="accent_red"/>
				<action function="set">theme_accent_tmp=Red</action>
				<action function="set">theme_accent_light_tmp=#E53935</action>
				<action function="set">theme_accent_dark_tmp=#FF5252</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y3%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Red"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Orchid -->
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y3%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x2%" y="%ws_cards_y3%" placement="4"/>
				<image resource="accent_orchid"/>
				<action function="set">theme_accent_tmp=Orchid</action>
				<action function="set">theme_accent_light_tmp=#C42CC9</action>
				<action function="set">theme_accent_dark_tmp=#E68AED</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y3%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Orchid"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Green -->
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y3%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x3%" y="%ws_cards_y3%" placement="4"/>
				<image resource="accent_green"/>
				<action function="set">theme_accent_tmp=Green</action>
				<action function="set">theme_accent_light_tmp=#1B873B</action>
				<action function="set">theme_accent_dark_tmp=#84C188</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y3%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Green"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Space -->
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y3%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x4%" y="%ws_cards_y3%" placement="4"/>
				<image resource="accent_space"/>
				<action function="set">theme_accent_tmp=Space</action>
				<action function="set">theme_accent_light_tmp=#47618A</action>
				<action function="set">theme_accent_dark_tmp=#99ACCC</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y3%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Space"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Ocean -->
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y4%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x1%" y="%ws_cards_y4%" placement="4"/>
				<image resource="accent_ocean"/>
				<action function="set">theme_accent_tmp=Ocean</action>
				<action function="set">theme_accent_light_tmp=#0C80A7</action>
				<action function="set">theme_accent_dark_tmp=#28BDD7</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x1%" y="%ws_cards_y4%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Ocean"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Purple -->
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y4%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x2%" y="%ws_cards_y4%" placement="4"/>
				<image resource="accent_purple"/>
				<action function="set">theme_accent_tmp=Purple</action>
				<action function="set">theme_accent_light_tmp=#725AFF</action>
				<action function="set">theme_accent_dark_tmp=#B5A9FC</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x2%" y="%ws_cards_y4%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Purple"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Yellow -->
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y4%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x3%" y="%ws_cards_y4%" placement="4"/>
				<image resource="accent_yellow"/>
				<action function="set">theme_accent_tmp=Yellow</action>
				<action function="set">theme_accent_light_tmp=#E6AF05</action>
				<action function="set">theme_accent_dark_tmp=#E6E68C</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x3%" y="%ws_cards_y4%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Yellow"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			<!-- Cinnamon -->
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y4%" placement="4"/>
				<image resource="style_shadow"/>
			</image>

			<button>
				<placement x="%ws_cards_x4%" y="%ws_cards_y4%" placement="4"/>
				<image resource="accent_cinnamon"/>
				<action function="set">theme_accent_tmp=Cinnamon</action>
				<action function="set">theme_accent_light_tmp=#AF6050</action>
				<action function="set">theme_accent_dark_tmp=#C3A6A2</action>
			</button>
			
			<image>
				<placement x="%ws_cards_x4%" y="%ws_cards_y4%" placement="4"/>
				<condition var1="theme_accent_tmp" var2="Cinnamon"/>
				<image resource="accent_apply"/>
			</image>
			<!-- -->

			
			<action>
				<condition var1="theme_style_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_style=1</action>
			</action>
			
			<action>
				<condition var1="theme_accent_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_accent=1</action>
			</action>

			<listbox style="settingslist">
				<placement x="0" y="%ws_cards_y5%" w="%screen_w%" h="%lb_l1%"/>
				<listitem name="{@accent_in_titles}">
					<data variable="theme_pie_tmp"/>
				</listitem>
			</listbox>

			<action>
				<condition var1="theme_pie_tmp" op="modified"/>
				<action function="set">needs_repack=1</action>
				<action function="set">update_action=1</action>
			</action>

			<template name="snackbar_update"/>

			<template name="gestures"/>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>

		<!-- Splash -->
		<page name="ext_custom_splash">
			<template name="splash_preview"/>
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@sph_sph}</text>
			</text>
			
			<button style="actionbar">
				<condition var1="spl_bg_user" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<action function="set">spl_bg_user=0</action>
				<action function="set">spl_logo_type=w</action>
				<action function="set">spl_ofr=1</action>
				<action function="set">spl_bg_color=#ED6F02</action>
				<action function="page">ext_custom_splash</action>
			</button>

			<image>
				<condition var1="spl_bg_user" var2="1"/>
				<placement x="%ab_btn1_x%" y="%ab_y%" placement="4"/>
				<image resource="actionbar_reset"/>
			</image>

			<listbox style="btn_list">
				<placement x="0" y="%row4_3_y%" w="%screen_w%" h="%spl_list_h%"/>
				<listitem name="{@spl_image}">
					<condition var1="spl_bg_on" var2="0"/>
					<icon res="add_image"/>
					<action function="set">tw_zip_location_tmp=%tw_file_location1%</action>
					<action function="set">location_input_tmp=%tw_file_location1%</action>
					<action function="set">sp_back=ext_custom_splash_select</action>
					<action function="page">ext_custom_splash_select</action>
				</listitem>
				<listitem name="{@spl_del_img}">
					<condition var1="spl_bg_on" var2="1"/>
					<icon res="image_off"/>
					<action function="set">spl_bg_on=0</action>
				</listitem>
				<listitem name="{@spl_background}">
					<icon res="subs"/>
					<action function="set">spl_bg_user=1</action>
					<action function="page">ext_custom_splash_color</action>
				</listitem>
				<listitem name="{@spl_logo}">
					<icon res="logo_icon"/>
					<action function="set">spl_bg_user=1</action>
					<action function="page">ext_custom_splash_logo</action>
				</listitem>
			</listbox>

			<image>
				<placement x="%btn_float_x%" y="%btn_float_y%" placement="4"/>
				<image resource="fab_shadow"/>
			</image>

			<button style="floating_btn">
				<placement x="%btn_float_x%" y="%btn_float_y%" placement="4"/>
				<action function="overlay">apply_splash</action>
			</button>
			
			<image>
				<placement x="%btn_float_x%" y="%btn_float_y%" placement="4"/>
				<image resource="fab_accept"/>
			</image>

			<action>
				<condition var1="spl_bg_on" var2="0"/>
				<condition var1="spl_logo_type" var2="0"/>
				<action function="set">spl_logo_type=w</action>
			</action>


			<template name="gestures"/>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>
		
		<page name="ext_custom_splash_color">
			<template name="splash_preview"/>
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@spl_background}</text>
			</text>
		
			<listbox>
				<placement x="0" y="%row4_3_y%" w="%screen_w%" h="%spl_list_h%"/>
				<data name="spl_bg_color"/>
				<iconsize w="%col1_x_caption%" h="%bl_h1%" padding="25"/>
				<listitem name="{@spl_accent}"><condition var1="accent" op="!=" var2="#d86100"/><condition var1="accent" op="!=" var2="#ed6f02"/>%accent%</listitem>
				<listitem name="{@spl_orange}">#ED6F02</listitem>
				<listitem name="{@spl_white}">#FFFFFF</listitem>
				<listitem name="{@spl_black}">#000000</listitem>
				<listitem name="{@spl_night}">#1E1F22</listitem>
				<listitem name="Google Dark">#202124</listitem>
			</listbox>

			<!-- DO NOT use code below for detecting white logo on white bg
				 It causes recovery crash -->
			<!--action>
				<condition var1="spl_logo_type" op="!=" var2="w"/>
				<condition var1="spl_bg_color" var2="#ED6F02"/>
				<action function="set">spl_logo_type=w</action>
			</action>
			<action>
				<condition var1="spl_logo_type" op="!=" var2="w"/>
				<condition var1="spl_bg_color" var2="#D86100"/>
				<action function="set">spl_logo_type=w</action>
			</action-->

			<template name="gestures"/>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom_splash</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>
		
		<page name="ext_custom_splash_logo">
			<template name="splash_preview"/>
			<template name="base"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@spl_logo}</text>
			</text>
		
			<listbox style="settingslist">
				<placement x="0" y="%row4_3_y%" w="%screen_w%" h="%bl_h1%"/>
				<iconsize w="%col1_x_caption%" h="%bl_h1%" padding="25"/>
				<listitem name="{@spl_ofr}">
					<condition var1="spl_logo_type" var2="0"/>
					<icon res="checkbox_false"/>
					<action function="set">spl_ofr=1</action>
					<action function="set">spl_logo_type=w</action>
				</listitem>
				<listitem name="{@spl_ofr}">
					<condition var1="spl_logo_type" op="!=" var2="0"/>
					<data variable="spl_ofr"/>
				</listitem>
			</listbox>

			<listbox>
				<placement x="0" y="%row5_2a_y%" w="%screen_w%" h="%bl_h4%"/>
				<iconsize w="%col1_x_caption%" h="%bl_h1%" padding="25"/>
				<data name="spl_logo_type"/>
				<listitem name="{@hidden}"><condition var1="spl_bg_on" var2="1"/>0</listitem>
				<listitem name="{@spl_white}">w</listitem>
				<listitem name="{@spl_black}">d</listitem>
				<listitem name="{@spl_orange}">o</listitem>
			</listbox>

			<template name="gestures"/>
			
			<action>
				<touch key="back"/>
				<action function="page">ext_custom_splash</action>
			</action>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>
		</page>
		
		<page name="ext_custom_splash_select">
			<fileselector style="fileselector_b">
				<condition var1="list_font" var2="1"/>
				<placement x="0" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<icon folder="folder_icon" file="file_icon" />
				<filter folders="1" files="1" extn=".png"/>
				<path name="tw_zip_location_tmp" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_splash_png_name"/>
			</fileselector>

			<fileselector style="fileselector_s">
				<condition var1="list_font" op="!=" var2="1"/>
				<placement x="0" y="%row_ab_ex_y%" w="%fileselector_width%" h="%fileselector_terminal_height%"/>
				<sort name="tw_gui_sort_order"/>
				<icon folder="folder_icon_small" file="file_icon_small" />
				<filter folders="1" files="1" extn=".png"/>
				<path name="tw_zip_location_tmp" default="/sdcard"/>
				<data name="tw_filename"/>
				<selection name="tw_splash_png_name"/>
			</fileselector>

			<template name="base_ex"/>

			<template name="actionbar_sort"/>
			<template name="actionbar_storage"/>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%ab_bc_y%"/>
				<text>{@sph_sph}</text>
			</text>

			<text style="text_ab_title">
				<placement x="%col1_x_indent%" y="%row1_2_y%" placement="2"/>
				<text>{@sel_splash_png}</text>
			</text>

			<text style="text_ab_subtitle_lim">
				<placement x="%col1_x_indent%" y="%row1_2_y%"/>
				<text>%tw_zip_location_tmp%</text>
			</text>
				
			<action>
				<condition var1="tw_filename" op="modified"/>
				<action function="set">tw_splash_png_path=%tw_zip_location_tmp%</action>
				<action function="set">spl_bg_user=1</action>
				<action function="set">spl_bg_on=1</action>
				<action function="page">ext_custom_splash</action>
			</action>

			<template name="gestures"/>

			<action>
				<touch key="home"/>
				<action function="page">main</action>
			</action>

			<action>
				<touch key="back"/>
				<action function="page">ext_custom_splash</action>
			</action>
		</page>

		<page name="apply_changes">
			<template name="dialog_body"/>
			
			<action>
				<action function="ftls">
					#Remove theme
					if [[ '%remove_theme%' = '1' ]] || [[ '%theme_pie_tmp%' = '1' && '%theme_style_tmp%' = 'Night' && '%theme_accent_tmp%' = 'Orange' && '%theme_font_tmp%' = 'Roboto' && '%theme_sec_font_tmp%' = 'GoogleSans' && '%theme_font_size_tmp%' = 'n' ]]; then
						[ -d "/sdcard/Fox/.theme" ] && rm -rf /sdcard/Fox/.theme;
						[[ '%update_navbar%' = '1' ]] || exit;
					else
						if [ ! -d "/sdcard/Fox/.theme" ]; then mkdir -p "/sdcard/Fox/.theme"; fi;
					fi;

					#Fonts
					if [[ '%update_fonts%' = '1' ]]; then
						medfont=Medium;
						regfont=Regular;

						[[ '%theme_font_weight_tmp%' = '1' ]] && medfont=Regular;
						[[ '%theme_font_weight_tmp%' = '2' ]] && regfont=Medium;

						if [ -f "/twres/fonts/%theme_sec_font_tmp%.ttf" ];
							then sec_med=;
								 sec_reg=;
							else sec_med=-${medfont};
								 sec_reg=-${regfont};
						fi;
						if [ -f "/twres/fonts/%theme_font_tmp%.ttf" ];
							then prim_med=;
								 prim_reg=;
							else prim_med=-${medfont};
								 prim_reg=-${regfont};
						fi;
						cat "/twres/themes/sed/font_%theme_font_size_tmp%.xml" | sed -e "
						s/#WEIGHT#/%theme_font_weight_tmp%/g;
						s/#PRIMARY_FONT_MED#/%theme_font_tmp%${prim_med}/g;
						s/#PRIMARY_FONT_REG#/%theme_font_tmp%${prim_reg}/g;
						s/#SECONDARY_FONT_MED#/%theme_sec_font_tmp%${sec_med}/g;
						s/#SECONDARY_FONT_REG#/%theme_sec_font_tmp%${sec_reg}/g;
						s/#PRIMARY_NAME#/%theme_font_tmp%/g;
						s/#SECONDARY_NAME#/%theme_sec_font_tmp%/g
						" > /sdcard/Fox/.theme/font.xml;
					fi;
				
					#Navbar
					if [[ '%update_navbar%' = '1' ]]; then
						if [ ! -d "/sdcard/Fox/.navbar" ]; then mkdir -p "/sdcard/Fox/.navbar"; fi;
						cat "/twres/themes/sed/navbar.xml" | sed -e "
						s/#NAVBAR_DISABLE#/%navbar_disable_tmp%/g;
						s/#RGE#/%real_gestures_enable_tmp%/g;
						s/#SCREEN_H#/$(expr %screen_original_h% + %navbar_disable_add_tmp%)/g
						" > /sdcard/Fox/.navbar/navbar.xml;
					fi;
				
					#Style
					if [[ '%update_style%' = '1' ]]; then
						cat "/twres/themes/styles/%theme_style_tmp%.xml" > /sdcard/Fox/.theme/style.xml;
					fi;
				
					#Accent
					if [[ '%update_accent%' = '1' ]] || [[ '%update_style%' = '1' ]]; then
						if [[ '%theme_style_act_tmp%' = 'Default' ]]; then
							cat "/twres/themes/sed/accent.xml" | sed -e "
							s/#ACCENT#/D%theme_accent_tmp%/g;
							s/#ACCENT_NAME#/%theme_accent_tmp%/g;
							s/#COLOR#/%theme_accent_dark_tmp%/g;
							s/#COLOR_LIGHT#/%theme_accent_light_tmp%/g;
							s/#COLOR_DARK#/%theme_accent_dark_tmp%/g
							" > /sdcard/Fox/.theme/accent.xml;
						else
							cat "/twres/themes/sed/accent.xml" | sed -e "
							s/#ACCENT#/%theme_accent_tmp%/g;
							s/#ACCENT_NAME#/%theme_accent_tmp%/g;
							s/#COLOR#/%theme_accent_light_tmp%/g;
							s/#COLOR_LIGHT#/%theme_accent_light_tmp%/g;
							s/#COLOR_DARK#/%theme_accent_dark_tmp%/g
							" > /sdcard/Fox/.theme/accent.xml;
						fi;
					fi;

					#ActBar
					if [[ '%update_action%' = '1' ]] || [[ '%update_style%' = '1' ]] || [[ '%update_accent%' = '1' ]]; then
						if [[ '%theme_pie_tmp%' = '1' ]]; then
							if [[ '%theme_style_act_tmp%' = 'Default' ]]; then
								cat "/twres/themes/sed/action.xml" | sed -e "
								s/#ACCENT#/D%theme_accent_tmp%/g;
								s/#A_COLOR#/accent/g;
								s/#ENABLE#/1/g
								" > /sdcard/Fox/.theme/action.xml;
							else
								cat "/twres/themes/sed/action.xml" | sed -e "
								s/#ACCENT#/%theme_accent_tmp%/g;
								s/#A_COLOR#/accent/g;
								s/#ENABLE#/1/g
								" > /sdcard/Fox/.theme/action.xml;
							fi;
						else
							cat "/twres/themes/sed/action.xml" | sed -e "
							s/#ACCENT#/%theme_style_act_tmp%/g;
							s/#A_COLOR#/text_action/g;
							s/#ENABLE#/0/g
							" > /sdcard/Fox/.theme/action.xml;
						fi
					fi;
				</action>
				<action function="reload"/>
			</action>

			<image>
				<image resource="snackbar"/>
				<placement x="0" y="%row_nav_y%" placement="2"/>
			</image>
			
			<text style="text_body1">
				<placement x="%snackbar_text_x%" y="%snackbar_text_y%"/>
				<text>{@theme_apply}</text>
			</text>
		</page>

		<page name="apply_splash">
			<template name="dialog_body"/>

			<image>
				<image resource="snackbar"/>
				<placement x="0" y="%row_nav_y%" placement="2"/>
			</image>
			
			<text style="text_body1">
				<placement x="%snackbar_text_x%" y="%snackbar_text_y%"/>
				<text>{@theme_apply}</text>
			</text>
			
			<action>
				<action function="wlfw"/>
				<action function="cmd">
						if [[ '%spl_bg_user%' = '1' ]]; then
							[[ '%spl_logo_type%' = 'o' ]] && logo_color=F86314;
							[[ '%spl_logo_type%' = 'w' ]] && logo_color=ffffff;
							[[ '%spl_logo_type%' = 'd' ]] && logo_color=353535;

							if [[ '%spl_logo_type%' = '0' ]];
								then logo_on=!--;
								else logo_on=;
							fi;
							if [[ '%spl_ofr%' = '1' ]];
								then logo_ofr=;
								else logo_ofr=!--;
							fi;

							[[ '%spl_logo_type%' = '0' ]] && logo_ofr=!--;

							if [[ '%spl_bg_on%' = '1' ]];
									then bg_on=;
										 cp "%tw_splash_png_path%/%tw_splash_png_name%" "/tmp/orangefox/ramdisk/twres/images/Splash/user.png";
										 cp "%tw_splash_png_path%/%tw_splash_png_name%" "/twres/images/Splash/user.png";
									else bg_on=!--;
										cp "/twres/images/Splash/empty.png" "/tmp/orangefox/ramdisk/twres/images/Splash/user.png";
										cp "/twres/images/Splash/empty.png" "/twres/images/Splash/user.png";
							fi;
							cat "/twres/themes/sed/splash.xml" | sed -e "
							s/#SHOWOFR#/${logo_ofr}/g;
							s/#TCOLOR#/${logo_color}/g;
							s/#BG_COLOR#/%spl_bg_color%/g;
							s/#LOGO_TYPE#/%spl_logo_type%/g;
							s/#LOGO_ON#/${logo_on}/g;
							s/#BG_IMG#/${bg_on}/g
							" > /tmp/orangefox/ramdisk/twres/splash.xml;
							else cat "/twres/themes/sed/splash_orig.xml" > /tmp/orangefox/ramdisk/twres/splash.xml;
						fi;
						cat "/tmp/orangefox/ramdisk/twres/splash.xml" > /twres/splash.xml;
				</action>
				<action function="wlfx"/>
				<action function="overlay"/>
				<action function="page">ext_custom</action>
			</action>
		</page>
	</pages>
</recovery>